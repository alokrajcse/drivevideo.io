<!DOCTYPE html>
<html>
<head>
  <title>Google Drive Video Player</title>
  <style>
    .container {
      width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
  </style>
  <script>
    function playVideo() {
      var inputLink = document.getElementById("videoLink").value;
      var videoId = getVideoId(inputLink);
      if (videoId) {
        var embedLink = "https://drive.google.com/file/d/" + videoId + "/preview";
        document.getElementById("player").setAttribute("src", embedLink);
        document.getElementById("playerContainer").style.display = "block";
        document.getElementById("shareButton").style.display = "block";
        document.getElementById("error").style.display = "none";
      } else {
        document.getElementById("playerContainer").style.display = "none";
        document.getElementById("shareButton").style.display = "none";
        document.getElementById("error").style.display = "block";
      }
    }

    function getVideoId(link) {
      var regex = /(?:\/d\/|id=|drive\/files\/|open\?id=)([\w-]+)/;
      var match = regex.exec(link);
      return match ? match[1] : null;
    }

    function generateShareableLink() {
      var inputLink = document.getElementById("videoLink").value;
      var videoId = getVideoId(inputLink);
      if (videoId) {
        var shareableLink = "https://drive.google.com/uc?export=download&id=" + videoId;
        document.getElementById("shareableLink").value = shareableLink;

        // Send the shareable link to Android WebView
        window.AndroidWebViewInterface.playVideo(shareableLink);
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <h2>Google Drive Video Player</h2>
    <p>Enter your Google Drive video link:</p>
    <input type="text" id="videoLink" placeholder="Video link" style="width: 100%;" />
    <button onclick="playVideo()">Play</button>
    <div id="playerContainer" style="display: none;">
      <iframe id="player" width="100%" height="400" frameborder="0" allowfullscreen></iframe>
    </div>
    <p id="error" style="display: none; color: red;">Invalid video link. Please enter a valid Google Drive video link.</p>
    <button id="shareButton" onclick="generateShareableLink()" style="display: none;">Generate Shareable Link</button>
    <p>Shareable Link:</p>
    <input type="text" id="shareableLink" style="width: 100%;" readonly />
  </div>

  <!-- Add the JavaScript interface for Android WebView -->
  <script>
    // Define the JavaScript interface for Android WebView
    function AndroidWebViewInterface() {}

    // Add a method to play video in Android WebView
    AndroidWebViewInterface.playVideo = function(shareableLink) {
      // Call the Android WebView's playVideo() method
      // Replace 'yourWebViewId' with the actual WebView ID in your Android application
      document.getElementById('yourWebViewId').playVideo(shareableLink);
    }

    // Register the JavaScript interface for Android WebView
    window.AndroidWebViewInterface = AndroidWebViewInterface;
  </script>
</body>
</html>
